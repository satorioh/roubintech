"use strict";function addTargetIcon(t){$("#"+t).find("a.list-group-item[target='_blank']").append($('<span class="glyphicon glyphicon-share-alt pull-right"></span>'))}function getDatahref(t){t.preventDefault(),t.stopPropagation(),"_blank"==$(this).attr("target")?window.open($(this).attr("data-href")):$showFrame.attr("src",$(this).attr("data-href"))}function htmlAppend(t,e,n,a,i){return $.each(t,function(t,a){n+='<a class="list-group-item" href="#" data-href="'+a.datahref+'" target="'+a.isjump+'">',n+="_movie"==e||"_comic"==e||"_download"==e||"_scholar"==e||"_design"==e||"_data"==e||"_funny"==e?'<i class="'+a.icon+'"></i>\n                        '+a.wname+'\n                        <div class="rightClickMenu" data-href="'+a.datahref+'" target="_blank">新标签页打开</div>\n                    </a>':'<svg class="icon" aria-hidden="true">\n                            <use xlink:href="'+a.icon+'"></use>\n                        </svg>\n                        '+a.wname+'\n                        <div class="rightClickMenu" data-href="'+a.datahref+'" target="_blank">新标签页打开</div>\n                        </a>'}),n}function loadListItem(t){$.ajax({url:"backend/list_group_item.php",data:{wgroup:t},success:function(e,n){console.log(n);var a="";a=htmlAppend(e,t,a),$("#"+t).html(a),addTargetIcon(t),$('[data-toggle="popover"]').popover()},error:function(t,e){console.log(e)}})}var $box=$("#_popBox"),$boxLeft=$("#_popBox-left"),$showFrame=$("#_showFrame"),$iframeMask=$("#_iframeMask"),$carouselImg=$(".carousel-inner a"),imgArr=[],itemTitle={$itemTitle:$(".itemTitle"),glyphiconToggle:function(){var t=$(this).children("span:nth-of-type(2)"),e=$(this).next().attr("id");t.hasClass("glyphicon-menu-up")?(t.removeClass("glyphicon-menu-up").addClass("glyphicon-menu-down"),$(this).children("span.glyphicon-menu-down").parent().css("color","#fff")):(t.removeClass("glyphicon-menu-down").addClass("glyphicon-menu-up"),$(this).children("span.glyphicon-menu-up").parent().css("color","springgreen"),""==$(this).next().html()&&loadListItem(e))},init:function(){var t=$(this).children("span:nth-of-type(2)");t.hasClass("glyphicon-menu-up")&&(t.removeClass("glyphicon-menu-up").addClass("glyphicon-menu-down"),$(this).children("span.glyphicon-menu-down").parent().css("color","#fff"))}},popBox={boxHeight:getComputedStyle($box[0]).height,boxWidth:getComputedStyle($box[0]).width,init:function(){$box.css("marginBottom","-"+this.boxHeight)},down:function(){$box.animate({marginBottom:"-"+this.boxHeight,opacity:"0"},300,"swing"),itemTitle.$itemTitle.next().removeClass("in"),itemTitle.init.call(itemTitle.$itemTitle)},up:function(){$box.animate({marginBottom:"35px",opacity:"1"},300,"swing"),$iframeMask.css("display","block")}};popBox.init(),$("#_startButton").click(function(t){parseInt($box.css("marginBottom"))<0?popBox.up():popBox.down()}),$iframeMask.on("click",function(t){$(this).css("display","none"),popBox.down()}),itemTitle.$itemTitle.on("click",itemTitle.glyphiconToggle),$boxLeft.on("click","a:not(.itemTitle)",getDatahref),$carouselImg.on("click",getDatahref),$(".common_site > a").on("click",getDatahref),$(function(){$.ajax({url:"backend/slide_data_img.php",success:function(t,e){var n="";$.each(t,function(t,e){n+='\n               <div class="item">\n                                    <a href="#" data-href="'+e.datahref+'" target="'+e.isjump+'">\n                                        <img class="img-responsive" src="'+e.img+'">\n                                        <div class="carousel-caption">\n                                            <span>'+e.wname+"</span>\n                                        </div>\n                                    </a>\n                                </div>\n               "}),$("#rightCarouselImg").html(n),$("#rightCarouselImg div:first-child").addClass("active")},error:function(t,e){console.log(e)}})}),$("#rightCarouselImg").on("click","a",getDatahref),$(window).on("contextmenu",function(t){var e=t.offsetX+"px",n=t.offsetY+"px";return $(t.target).children(".rightClickMenu").css({display:"block",left:e,top:n}),!1}),$boxLeft.on("mouseleave",".list-group-item",function(t){$(".rightClickMenu").css("display","none")}),$boxLeft.on("click",".rightClickMenu",getDatahref),$("#inputSearch").on("keyup",function(t){setTimeout(function(){var t=$("#inputSearch").val();t?($("#searchList").empty(),$.ajax({url:"backend/search.php",data:{kw:t},success:function(t,e){var n="";$.each(t,function(t,e){n+='<a class="list-group-item search-item" href="#" data-href="'+e.datahref+'" target="'+e.isjump+'">',"_movie"==e.wgroup||"_comic"==e.wgroup||"_download"==e.wgroup||"_scholar"==e.wgroup||"_design"==e.wgroup||"_data"==e.wgroup||"_funny"==e.wgroup?n+='<i class="'+e.icon+'"></i>\n                        '+e.wname+'\n                        <div class="rightClickMenu" data-href="'+e.datahref+'" target="_blank">新标签页打开</div>\n                    </a>':n+='<svg class="icon" aria-hidden="true">\n                            <use xlink:href="'+e.icon+'"></use>\n                        </svg>\n                        '+e.wname+'\n                        <div class="rightClickMenu" data-href="'+e.datahref+'" target="_blank">新标签页打开</div>\n                        </a>'}),$("#searchList").append($(n))},error:function(t,e){console.log(e)}})):$("#searchList").empty()},1e3)}),function(t){t(window).on("load",function(){t("#_popBox-left").mCustomScrollbar({theme:"light-3",scrollInertia:300,mouseWheelPixels:120,autoHideScrollbar:!0})})}(jQuery);